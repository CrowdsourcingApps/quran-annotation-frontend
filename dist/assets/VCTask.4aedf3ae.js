import{E as T,Q as P,V as S}from"./VDialog.d20c52e6.js";import{V as E,q as R}from"./VcInstructions.48c011e9.js";import{aF as b,W as y,Y as v,Z as r,_ as c,m as t,a2 as m,$ as i,a4 as u,L as V,U as a,a1 as l,aG as z}from"./index.ddf31591.js";import{_ as L,w}from"./VAvatar.fe02339b.js";import{a as h,V as p}from"./VRow.8f7b1e7f.js";import{V as k,e as f,c as B,b as N}from"./VCard.d918886f.js";import{V as o,d as C}from"./VBtn.8f42f360.js";import{V as U,a as F}from"./VTimelineItem.e61b9756.js";import{V as j}from"./VSpacer.bae362ff.js";import"./VAlert.88d758f4.js";import"./VOverlay.e1579244.js";import"./forwardRefs.54bb1675.js";const $="tasks/";class D{get_validate_correctness(){return b.get($+"validate_correctness/")}save_validate_correctness_answers(s){return b.post($+"validate_correctness/answers",s).then(g=>(console.log(g),g))}}const _=new D,Q={components:{VcInstructions:E,Error:T},data:()=>({error:null,loading:!0,loading_audio:!1,quran:R,questions:[],currnet:new P,index:0,problem:!1,message:null,title:null,text:null,time_line_colors:[],answers:[],disabled:!1,end:!1,audio:new Audio,Instructions_dialog:!1}),created(){this.getRealTasks()},methods:{InstructionsClicked(){const e={location:"VCTask"};y.track("VCInstructions Clicked",e)},toggleProblem(){this.problem=!this.problem},reloadPage(){window.location.reload()},getRealTasks(){_.get_validate_correctness().then(e=>{this.questions=e.data,this.currnet=this.questions[0],this.time_line_colors=new Array(this.questions.length).fill("white"),this.time_line_colors[0]="blue",this.loading=!1},e=>{e.response.status===404?this.error="tasks.404_message":e.response.status===400?this.error="tasks.400_message":this.error="error",this.loading=!1})},setAnswer(e){this.disabled=!0;let s={id:this.currnet.id,label:e,control_task:this.currnet.control_task};this.answers.push(s),this.time_line_colors[this.index]="success",this.index===this.questions.length-1?(this.loading=!0,this.saveAnswers()):this.next()},next(){this.audio&&this.audio.pause(),this.loading=!0,this.problem=!1,this.index=this.index+1,this.currnet=this.questions[this.index],this.time_line_colors[this.index]="blue",this.disabled=!1,this.loading=!1},skip(){y.track("VCSkip Clicked"),this.audio&&this.audio.pause(),this.loading=!0,this.problem=!1,this.time_line_colors[this.index]="fail",this.index===this.questions.length-1?(this.loading=!0,this.saveAnswers()):(this.index=this.index+1,this.currnet=this.questions[this.index],this.time_line_colors[this.index]="blue",this.disabled=!1,this.loading=!1)},playAudio(){this.loading_audio=!0,this.audio.src="https://"+this.currnet.audio_file_name,this.audio.load(),this.audio.addEventListener("canplaythrough",()=>{this.audio.readyState===4&&(this.audio.play(),this.loading_audio=!1)})},saveAnswers(){_.save_validate_correctness_answers(this.answers).then(e=>{this.end=!0,this.loading=!1},e=>{e.response.status===400?e.response.data.detail==="Participant should pass the entrance exam first"?this.error="tasks.400_message":this.error="error":this.error="error",this.loading=!1})}},beforeRouteLeave(e,s,g){this.answers.length>0&&this.saveAnswers(),g()}},G={key:3,style:{display:"inline-grid"}},W={key:4,style:{display:"inline-grid"}};function Y(e,s,g,Z,H,d){const A=v("Error"),q=v("VcInstructions");return r(),c(V,null,[t(A,{error:e.error},null,8,["error"]),e.end?(r(),m(h,{key:0,style:{"margin-top":"50px"}},{default:i(()=>[t(p,{cols:"1",sm:"3"}),t(p,{col:"10",sm:"6"},{default:i(()=>[t(k,{class:"mx-auto ma-2 pa-2",style:{"text-align":"center"}},{default:i(()=>[t(f,{class:"text-h5 ma-2 pa-2",style:{"text-align":"center"}},{default:i(()=>[t(w,{class:"ma-2",icon:"mdi-party-popper",color:"gold"}),a(" "+l(e.$t("support.jazak"))+" ",1),t(w,{class:"ma-2",icon:"mdi-party-popper",color:"gold"})]),_:1}),t(f,{class:"text-h5 ma-2 pa-2",style:{"text-align":"center","line-height":"2.25rem"}},{default:i(()=>[a(l(e.$t("tasks.completed")),1)]),_:1}),t(f,null,{default:i(()=>[a(l(e.$t("tasks.contribution_today")+" "+this.answers.length+" "+e.$t("tasks.tasks")),1)]),_:1}),e.end_result?(r(),m(f,{key:0,class:"text-h5"},{default:i(()=>[a(l(e.$t("trainning_session.ready")),1)]),_:1})):u("",!0),t(o,{style:{margin:"10px",color:"#fff !important"},color:"success",onClick:s[0]||(s[0]=n=>d.reloadPage())},{default:i(()=>[a(l(e.$t("tasks.contribute_again")),1)]),_:1})]),_:1})]),_:1}),t(p,{cols:"1",sm:"3"})]),_:1})):u("",!0),e.loading?(r(),m(h,{key:1,style:{"margin-top":"50px"}},{default:i(()=>[t(p,{cols:"4"}),t(p,{cols:"4",style:{"text-align":"center"}},{default:i(()=>[t(C,{indeterminate:"",size:51,width:7})]),_:1})]),_:1})):u("",!0),!e.loading&&!e.end&&!e.error?(r(),m(h,{key:2,style:{"justify-content":"center"}},{default:i(()=>[t(p,{cols:"12",sm:"6"},{default:i(()=>[t(U,{"line-inset":"200",direction:"horizontal"},{default:i(()=>[(r(!0),c(V,null,z(e.time_line_colors,(n,I)=>(r(),m(F,{key:I,size:"small","dot-color":n,icon:"mdi-check"},null,8,["dot-color"]))),128))]),_:1})]),_:1})]),_:1})):u("",!0),!e.loading&&!e.end&&!e.error?(r(),m(h,{key:3,style:{"margin-top":"0px"}},{default:i(()=>[t(p,{cols:"1",sm:"3"}),t(p,{cols:"10",sm:"6"},{default:i(()=>[t(k,{class:"mx-auto",style:{"text-align":"center"}},{default:i(()=>[t(f,{class:"ma-2 pa-2"},{default:i(()=>[a(l(e.$t("trainning.listen")),1)]),_:1}),e.loading_audio?u("",!0):(r(),m(o,{key:0,onClick:s[1]||(s[1]=n=>d.playAudio(e.audioFileName)),class:"mr-3",variant:"outlined",color:"black",icon:"mdi-play"})),e.loading_audio?(r(),m(C,{key:1,"model-value":"20",size:47,indeterminate:""})):u("",!0),t(f,{class:"ma-2 pa-2"},{default:i(()=>[a(l(e.$t("trainning.recited_correctly")),1)]),_:1}),t(f,{style:{"line-height":"2.25rem"},class:"ma-2 pa-2 text-h5"},{default:i(()=>[a(l(e.quran[e.currnet.surra_number][e.currnet.aya_number].uthmani),1)]),_:1}),e.problem?(r(),m(B,{key:2,class:"ma-2 pa-2"},{default:i(()=>[a(l(e.$t("trainning.what_problem")),1)]),_:1})):u("",!0),e.problem?u("",!0):(r(),c("div",G,[t(o,{disabled:e.disabled,onClick:s[2]||(s[2]=n=>d.setAnswer("correct")),color:"success",style:{margin:"10px",color:"#fff !important"}},{default:i(()=>[a(l(e.$t("trainning.correct")),1)]),_:1},8,["disabled"]),t(o,{disabled:e.disabled,onClick:s[3]||(s[3]=n=>d.setAnswer("in_correct")),color:"fail",style:{margin:"10px",color:"#fff !important"}},{default:i(()=>[a(l(e.$t("trainning.incorrect")),1)]),_:1},8,["disabled"]),t(o,{disabled:e.disabled,onClick:s[4]||(s[4]=n=>d.toggleProblem()),color:"invalid",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.problem")),1)]),_:1},8,["disabled"])])),e.problem?(r(),c("div",W,[t(o,{disabled:e.disabled,onClick:s[5]||(s[5]=n=>d.setAnswer("in_complete")),variant:"outlined",color:"invalidoption",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.incomplete")),1)]),_:1},8,["disabled"]),t(o,{disabled:e.disabled,onClick:s[6]||(s[6]=n=>d.setAnswer("not_match_aya")),variant:"outlined",color:"invalidoption",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.different")),1)]),_:1},8,["disabled"]),t(o,{disabled:e.disabled,onClick:s[7]||(s[7]=n=>d.setAnswer("multiple_aya")),variant:"outlined",color:"invalidoption",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.multiple")),1)]),_:1},8,["disabled"]),t(o,{disabled:e.disabled,onClick:s[8]||(s[8]=n=>d.setAnswer("not_related_quran")),variant:"outlined",color:"invalidoption",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.empty")),1)]),_:1},8,["disabled"]),t(o,{disabled:e.disabled,onClick:s[9]||(s[9]=n=>d.toggleProblem()),color:"invalid",style:{margin:"10px"},modelValue:e.problem,"onUpdate:modelValue":s[10]||(s[10]=n=>e.problem=n)},{default:i(()=>[a(l(e.$t("trainning.back")),1)]),_:1},8,["disabled","modelValue"])])):u("",!0)]),_:1}),t(h,{style:{margin:"15px"}},{default:i(()=>[t(o,{variant:"outlined",color:"info","prepend-icon":"mdi-notebook-outline",onClick:s[13]||(s[13]=n=>d.InstructionsClicked())},{default:i(()=>[a(l(e.$t("homepage.instructions"))+" ",1),t(S,{modelValue:e.Instructions_dialog,"onUpdate:modelValue":s[12]||(s[12]=n=>e.Instructions_dialog=n),activator:"parent",width:"auto"},{default:i(()=>[t(k,null,{default:i(()=>[t(q,{Showstart:!1}),t(N,null,{default:i(()=>[t(o,{color:"invalid",block:"",onClick:s[11]||(s[11]=n=>e.Instructions_dialog=!1)},{default:i(()=>[a(l(e.$t("trainning.close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(j),e.index!=this.questions.length?(r(),m(o,{key:0,onClick:s[14]||(s[14]=n=>d.skip()),variant:"outlined",color:"info","prepend-icon":e.$i18n.locale==="AR"?"mdi-chevron-left":"mdi-chevron-right"},{default:i(()=>[a(l(e.$t("tasks.skip")),1)]),_:1},8,["prepend-icon"])):u("",!0)]),_:1})]),_:1}),t(p,{col:"1",sm:"3"})]),_:1})):u("",!0)],64)}const ne=L(Q,[["render",Y]]);export{ne as default};
