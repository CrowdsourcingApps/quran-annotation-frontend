import{E as T,Q as P,V as S,b as E,a as R}from"./VTimelineItem.e2df2193.js";import{V as z,q as L}from"./VcInstructions.035a96d5.js";import{aE as b,W as y,Y as v,Z as r,_ as c,m as s,a2 as m,$ as i,a4 as u,L as w,U as a,a1 as l,aF as B}from"./index.31ccf5c8.js";import{_ as N,y as V,j as o,Z as C}from"./VAvatar.6638e8fa.js";import{a as h,V as p}from"./VRow.469c364e.js";import{V as k,d as f,c as U,b as j}from"./VCard.e2053c6a.js";import{V as F}from"./VSpacer.4fc7dee3.js";import"./VAlert.a00cdf75.js";import"./VOverlay.2150a0c2.js";import"./forwardRefs.54bb1675.js";const $="tasks/";class D{get_validate_correctness(){return b.get($+"validate_correctness/")}save_validate_correctness_answers(t){return b.post($+"validate_correctness/answers",t).then(g=>(console.log(g),g))}}const _=new D,Q={components:{VcInstructions:z,Error:T},data:()=>({error:null,loading:!0,loading_audio:!1,quran:L,questions:[],currnet:new P,index:0,problem:!1,message:null,title:null,text:null,time_line_colors:[],answers:[],disabled:!1,end:!1,audio:new Audio,Instructions_dialog:!1}),created(){this.getRealTasks()},methods:{InstructionsClicked(){const e={location:"VCTask"};y.track("VCInstructions Clicked",e)},toggleProblem(){this.problem=!this.problem},reloadPage(){window.location.reload()},getRealTasks(){_.get_validate_correctness().then(e=>{this.questions=e.data,this.currnet=this.questions[0],this.time_line_colors=new Array(this.questions.length).fill("white"),this.time_line_colors[0]="blue",this.loading=!1},e=>{e.response.status===404?this.error="tasks.404_message":e.response.status===400?this.error="tasks.400_message":this.error="error",this.loading=!1})},setAnswer(e){this.disabled=!0;let t={id:this.currnet.id,label:e,control_task:this.currnet.control_task};this.answers.push(t),this.time_line_colors[this.index]="success",this.index===this.questions.length-1?(this.loading=!0,this.saveAnswers()):this.next()},next(){this.audio&&this.audio.pause(),this.loading=!0,this.problem=!1,this.index=this.index+1,this.currnet=this.questions[this.index],this.time_line_colors[this.index]="blue",this.disabled=!1,this.loading=!1},skip(){y.track("VCSkip Clicked"),this.audio&&this.audio.pause(),this.loading=!0,this.problem=!1,this.time_line_colors[this.index]="fail",this.index===this.questions.length-1?(this.loading=!0,this.saveAnswers()):(this.index=this.index+1,this.currnet=this.questions[this.index],this.time_line_colors[this.index]="blue",this.disabled=!1,this.loading=!1)},playAudio(){this.loading_audio=!0,this.audio.src="https://"+this.currnet.audio_file_name,this.audio.load(),this.audio.addEventListener("canplaythrough",()=>{this.audio.readyState===4&&(this.audio.play(),this.loading_audio=!1)})},saveAnswers(){_.save_validate_correctness_answers(this.answers).then(e=>{this.end=!0,this.loading=!1},e=>{e.response.status===400?e.response.data.detail==="Participant should pass the entrance exam first"?this.error="tasks.400_message":this.error="error":this.error="error",this.loading=!1})}},beforeRouteLeave(e,t,g){this.answers.length>0&&this.saveAnswers(),g()}},Z={key:3,style:{display:"inline-grid"}},W={key:4,style:{display:"inline-grid"}};function Y(e,t,g,G,H,d){const A=v("Error"),q=v("VcInstructions");return r(),c(w,null,[s(A,{error:e.error},null,8,["error"]),e.end?(r(),m(h,{key:0,style:{"margin-top":"50px"}},{default:i(()=>[s(p,{cols:"1",sm:"3"}),s(p,{col:"10",sm:"6"},{default:i(()=>[s(k,{class:"mx-auto ma-2 pa-2",style:{"text-align":"center"}},{default:i(()=>[s(f,{class:"text-h5 ma-2 pa-2",style:{"text-align":"center"}},{default:i(()=>[s(V,{class:"ma-2",icon:"mdi-party-popper",color:"gold"}),a(" "+l(e.$t("support.jazak"))+" ",1),s(V,{class:"ma-2",icon:"mdi-party-popper",color:"gold"})]),_:1}),s(f,{class:"text-h5 ma-2 pa-2",style:{"text-align":"center","line-height":"2.25rem"}},{default:i(()=>[a(l(e.$t("tasks.completed")),1)]),_:1}),s(f,null,{default:i(()=>[a(l(e.$t("tasks.contribution_today")+" "+this.answers.length+" "+e.$t("tasks.tasks")),1)]),_:1}),e.end_result?(r(),m(f,{key:0,class:"text-h5"},{default:i(()=>[a(l(e.$t("trainning_session.ready")),1)]),_:1})):u("",!0),s(o,{style:{margin:"10px",color:"#fff !important"},color:"success",onClick:t[0]||(t[0]=n=>d.reloadPage())},{default:i(()=>[a(l(e.$t("tasks.contribute_again")),1)]),_:1})]),_:1})]),_:1}),s(p,{cols:"1",sm:"3"})]),_:1})):u("",!0),e.loading?(r(),m(h,{key:1,style:{"margin-top":"50px"}},{default:i(()=>[s(p,{cols:"4"}),s(p,{cols:"4",style:{"text-align":"center"}},{default:i(()=>[s(C,{indeterminate:"",size:51,width:7})]),_:1})]),_:1})):u("",!0),!e.loading&&!e.end&&!e.error?(r(),m(h,{key:2,style:{"justify-content":"center"}},{default:i(()=>[s(p,{cols:"12",sm:"6"},{default:i(()=>[s(S,{"line-inset":"200",direction:"horizontal"},{default:i(()=>[(r(!0),c(w,null,B(e.time_line_colors,(n,I)=>(r(),m(R,{key:I,size:"small","dot-color":n,icon:"mdi-check"},null,8,["dot-color"]))),128))]),_:1})]),_:1})]),_:1})):u("",!0),!e.loading&&!e.end&&!e.error?(r(),m(h,{key:3,style:{"margin-top":"0px"}},{default:i(()=>[s(p,{cols:"1",sm:"3"}),s(p,{cols:"10",sm:"6"},{default:i(()=>[s(k,{class:"mx-auto",style:{"text-align":"center"}},{default:i(()=>[s(f,{class:"ma-2 pa-2"},{default:i(()=>[a(l(e.$t("trainning.listen")),1)]),_:1}),e.loading_audio?u("",!0):(r(),m(o,{key:0,onClick:t[1]||(t[1]=n=>d.playAudio(e.audioFileName)),class:"mr-3",variant:"outlined",color:"black",icon:"mdi-play"})),e.loading_audio?(r(),m(C,{key:1,"model-value":"20",size:47,indeterminate:""})):u("",!0),s(f,{class:"ma-2 pa-2"},{default:i(()=>[a(l(e.$t("trainning.recited_correctly")),1)]),_:1}),s(f,{style:{"line-height":"2.25rem"},class:"ma-2 pa-2 text-h5"},{default:i(()=>[a(l(e.quran[e.currnet.surra_number][e.currnet.aya_number].uthmani),1)]),_:1}),e.problem?(r(),m(U,{key:2,class:"ma-2 pa-2"},{default:i(()=>[a(l(e.$t("trainning.what_problem")),1)]),_:1})):u("",!0),e.problem?u("",!0):(r(),c("div",Z,[s(o,{disabled:e.disabled,onClick:t[2]||(t[2]=n=>d.setAnswer("correct")),color:"success",style:{margin:"10px",color:"#fff !important"}},{default:i(()=>[a(l(e.$t("trainning.correct")),1)]),_:1},8,["disabled"]),s(o,{disabled:e.disabled,onClick:t[3]||(t[3]=n=>d.setAnswer("in_correct")),color:"fail",style:{margin:"10px",color:"#fff !important"}},{default:i(()=>[a(l(e.$t("trainning.incorrect")),1)]),_:1},8,["disabled"]),s(o,{disabled:e.disabled,onClick:t[4]||(t[4]=n=>d.toggleProblem()),color:"invalid",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.problem")),1)]),_:1},8,["disabled"])])),e.problem?(r(),c("div",W,[s(o,{disabled:e.disabled,onClick:t[5]||(t[5]=n=>d.setAnswer("in_complete")),variant:"outlined",color:"invalidoption",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.incomplete")),1)]),_:1},8,["disabled"]),s(o,{disabled:e.disabled,onClick:t[6]||(t[6]=n=>d.setAnswer("not_match_aya")),variant:"outlined",color:"invalidoption",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.different")),1)]),_:1},8,["disabled"]),s(o,{disabled:e.disabled,onClick:t[7]||(t[7]=n=>d.setAnswer("multiple_aya")),variant:"outlined",color:"invalidoption",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.multiple")),1)]),_:1},8,["disabled"]),s(o,{disabled:e.disabled,onClick:t[8]||(t[8]=n=>d.setAnswer("not_related_quran")),variant:"outlined",color:"invalidoption",style:{margin:"10px"}},{default:i(()=>[a(l(e.$t("trainning.empty")),1)]),_:1},8,["disabled"]),s(o,{disabled:e.disabled,onClick:t[9]||(t[9]=n=>d.toggleProblem()),color:"invalid",style:{margin:"10px"},modelValue:e.problem,"onUpdate:modelValue":t[10]||(t[10]=n=>e.problem=n)},{default:i(()=>[a(l(e.$t("trainning.back")),1)]),_:1},8,["disabled","modelValue"])])):u("",!0)]),_:1}),s(h,{style:{margin:"15px"}},{default:i(()=>[s(o,{variant:"outlined",color:"info","prepend-icon":"mdi-notebook-outline",onClick:t[13]||(t[13]=n=>d.InstructionsClicked())},{default:i(()=>[a(l(e.$t("homepage.instructions"))+" ",1),s(E,{modelValue:e.Instructions_dialog,"onUpdate:modelValue":t[12]||(t[12]=n=>e.Instructions_dialog=n),activator:"parent",width:"auto"},{default:i(()=>[s(k,null,{default:i(()=>[s(q,{Showstart:!1}),s(j,null,{default:i(()=>[s(o,{color:"invalid",block:"",onClick:t[11]||(t[11]=n=>e.Instructions_dialog=!1)},{default:i(()=>[a(l(e.$t("trainning.close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(F),e.index!=this.questions.length?(r(),m(o,{key:0,onClick:t[14]||(t[14]=n=>d.skip()),variant:"outlined",color:"info","prepend-icon":e.$i18n.locale==="AR"?"mdi-chevron-left":"mdi-chevron-right"},{default:i(()=>[a(l(e.$t("tasks.skip")),1)]),_:1},8,["prepend-icon"])):u("",!0)]),_:1})]),_:1}),s(p,{col:"1",sm:"3"})]),_:1})):u("",!0)],64)}const ae=N(Q,[["render",Y]]);export{ae as default};
